(()=>{"use strict";var e,t={702:()=>{const e=window.wp.blocks;function t(){return t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t.apply(this,arguments)}const n=window.wp.element,r=window.wp.i18n,o=window.wp.blockEditor,i="IBL_EDUCATION_AUTHORISATION_TOKEN",a=()=>fetch("https://ibleducation-instance1.local/wp-json/greetingbot/v1/login",{method:"POST",body:"grant_type=client_credentials&client_id=michaeloncode&client_secret=michaeloncode",headers:{"Content-Type":"application/x-www-form-urlencoded"}}),c=async e=>{const t=(async()=>{const e=localStorage.getItem(i);let t=e?JSON.parse(e):null;return(new Date).getTime()/1e3>(t?.expired_at||0)&&(t=await(async()=>a().then((e=>e.json())).then((e=>{if(!(e||e?.access_token||e?.expires_in))throw new error("EMPTY AUTH DATA RETURNED");return(e=>{const t=new Date,n={...e,expired_at:t.getTime()/1e3+(e?.expires_in||3600)};localStorage.setItem(i,JSON.stringify(n))})(e),e})).catch((e=>{console.log(e?.message||"Something went wrong")})))()),t})();return Promise.resolve(t).then((t=>fetch("https://ibleducation-instance1.local/wp-json/greetingbot/v1/send",{method:"POST",headers:{Authorization:"Bearer "+t.access_token,"Content-Type":"application/json"},body:JSON.stringify({greeting:e})})))},s=JSON.parse('{"u2":"ibl-gutenberg-greeter/ibl-gutenberg-greeter"}');(0,e.registerBlockType)(s.u2,{edit:function(e){let{attributes:i,setAttributes:a}=e;const c=(0,o.useBlockProps)();return(0,n.createElement)(o.RichText,t({},c,{tagName:"p",onChange:e=>{a({content:e})},value:i.content,placeholder:(0,r.__)("Write your text...")}))},save:function(e){let{attributes:r}=e;const i=o.useBlockProps.save();return a=r.content,c(a).then((e=>{})).catch((e=>{console.log("Something went wrong while updating data")})),(0,n.createElement)(o.RichText.Content,t({},i,{tagName:"p",value:r.content}));var a}})}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var i=n[e]={exports:{}};return t[e](i,i.exports,r),i.exports}r.m=t,e=[],r.O=(t,n,o,i)=>{if(!n){var a=1/0;for(g=0;g<e.length;g++){for(var[n,o,i]=e[g],c=!0,s=0;s<n.length;s++)(!1&i||a>=i)&&Object.keys(r.O).every((e=>r.O[e](n[s])))?n.splice(s--,1):(c=!1,i<a&&(a=i));if(c){e.splice(g--,1);var l=o();void 0!==l&&(t=l)}}return t}i=i||0;for(var g=e.length;g>0&&e[g-1][2]>i;g--)e[g]=e[g-1];e[g]=[n,o,i]},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={826:0,431:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var o,i,[a,c,s]=n,l=0;if(a.some((t=>0!==e[t]))){for(o in c)r.o(c,o)&&(r.m[o]=c[o]);if(s)var g=s(r)}for(t&&t(n);l<a.length;l++)i=a[l],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(g)},n=globalThis.webpackChunkibl_gutenberg_greeter=globalThis.webpackChunkibl_gutenberg_greeter||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=r.O(void 0,[431],(()=>r(702)));o=r.O(o)})();